nest_
    _
        roost(nest_) -- sets self as roost, passes down
        is_roost
        init -- callback on roost()
        each(self, function) -- callback on every child
        +, +=
        
        is_nest_ = true
        index (i)
        parent (p)
        enabled -- boolean or callback (en)
        order (o)
        
        groupidx = _group.index
        metacontrol_targets = { _metacontrol }
        
        check(groupidx, args, metacontrols) -- pass to children
        look(groupidx) -- pass to children, sort by z
        draw(_group.id, method, args...) -- passed to parent (if is_roost then to _group)
        
        print() -- print all member keys
    
    *
    {} / nest_ -- table becomes nest via __newindex
    _control
    _meta = {} -- properties discoverable by siblings and nephews


_control
    * -- (referenced by input and output)
    value -- {} (v)
    meta -- {} (m)
    event -- callback on input (args: value, meta) (e)
    order (o)
    enabled -- boolean or callback

    _
        input -- inputs[0] (inp)
        output -- outputs[0] (out)
        inputs[] -- _input
            input -- interface -> value (+meta)
                enabled -- boolean or callback
        outputs[] -- _output
            output -- value -> interface
                enabled -- boolean or callback

        is_control_ = true
        parent -- (p)
        index -- (i)
        
        groupidx = _group.index
        metacontrol_targets = { _metacontrol }
        
        check(_group.id, args, metacontrols) -- passed to input
        look(_group.id) -- passed to output
        draw(_group.id, method, args...) -- passed to parent
        print() -- print all member keys
        
        
        set() -- set v + draw
        get() -- get v
        print() -- print all member keys
        
_input
    _
        is_input
        control
        check(args, metacontrols) -- evaluate value change, if change pass to metacontrols
        transform

_output
    _
        is_output
        control
        look(_group.id) -- call draw() on control
        transform
        
_metacontrol
    _
        is_metacontrol
        pass
    
    targets -- append self to target.metacontrol_targets on set
    target -- targets[0]

_group -- stored in global variables & nest_api.groups
    _
        index
    
    nest_
    _control
    
nest_api -- stored in global variable
    draw() -- passed to roost
    roost = nest_
    init()
    groups = { _group }
    
_grid
    _
        vport
        enabled
        grid -- the grid object
        
        check(x, y, z) -- input handler for vport, passes roost.check(self.index, {x,y,z,t}, {})
        look() -- calls roost.look(self.index)
        draw(method, args...) -- called by _grid.control instances
        
    _control
    

_grid.control / _grid.metacontrol
    _
        
    meta
        last -- last value
        time -- when edge == 0, time between last event & release
        events -- when edge == 0, list of on keys & times
        matrix -- value as binary matrix (also used by draw)
        added -- when v is table, values added to v
        removed -- when v is table, values removed from v
    x
    y
    lvl -- = { on, off} , when enum { lvl0, lvl1, lvl2, lvl3, etc }
    edge -- whether to call event() on every key down (sometimes also on key ups) or when all keys have been released
    draw_slew -- timed linear glide between values (output only)
    polyphony -- max number of concurrent values, -1 is infinite
    
    
_grid.momentary
_grid.toggle
_grid.value
_grid.enum
    
_screen
    _
        enabled
        look() -- called by global redraw, calls roost.look(self.index)
        draw(method, args...) -- called by _screen.control instances
    
    _control

_screen.control / _screen.metacontrol
    x
    y
    lvl
    
_enc
    _
        check(n, d) -- called by global enc(), passes roost.check(self.index, {n, d}, {})
        
    _control
    
    
_enc.control / _enc.metacontrol
    n
    edge
    
_key
    _
        check(n, z) -- called by global key(), passes roost.check(self.index, {n, z}, {})

_key.control / _key.metacontrol
    n